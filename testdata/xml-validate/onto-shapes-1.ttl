@prefix owl:         <http://www.w3.org/2002/07/owl#> .
@prefix rdf:         <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:        <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:         <http://www.w3.org/2001/XMLSchema#> .
@prefix sh:          <http://www.w3.org/ns/shacl#> .

@prefix val-shapes:  <http://api.knora.org/validation-shapes#> .
@prefix val-onto:    <http://api.knora.org/validation-onto#> .
@prefix onto:        <http://validation-9999/onto#> .
@prefix onto-shapes: <http://validation-9999/onto-shapes#> .


onto-shapes:NormalClass_Shape
  a                    sh:NodeShape ;
  sh:targetClass       onto:NormalClass ;
  sh:property          [
                         a           sh:PropertyShape ;
                         sh:path     onto:linkProp ;
                       ] ,
                       onto-shapes:linkProp_PropShape ,
                       [
                         a           sh:PropertyShape ;
                         sh:path     onto:listProp ;
                         sh:node     onto-shapes:listProp_NodeShape ;
                       ] ,
                       [
                         a           sh:PropertyShape ;
                         sh:path     onto:hasSimpleText ;
                         sh:node     onto-shapes:hasSimpleText_NodeShape ;
                       ] ,
                       onto-shapes:hasSimpleText_PropShape ;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:closed            true .


onto-shapes:CardOneResource_Shape
  a                    sh:NodeShape ;
  sh:targetClass       onto:CardOneResource ;
  sh:property          [
                         a           sh:PropertyShape ;
                         sh:path     onto:hasSimpleText ;
                         sh:minCount 1 ;
                         sh:maxCount 1 ;
                         sh:severity sh:Violation ;
                         sh:message  "Cardinality: 'onto:hasSimpleText' -> exactly 1"
                       ] ,
                       [
                         a           sh:PropertyShape ;
                         sh:path     onto:hasSimpleText ;
                         sh:node     onto-shapes:hasSimpleText_NodeShape ;
                       ] ,
                       onto-shapes:hasSimpleText_PropShape ;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:closed            true .


onto-shapes:SubClass_Shape
  a                    sh:NodeShape ;
  sh:targetClass       onto:SubClass ;
  sh:property          [
                         a           sh:PropertyShape ;
                         sh:path     onto:hasSimpleText ;
                         sh:minCount 1 ;
                         sh:maxCount 1 ;
                         sh:severity sh:Violation ;
                         sh:message  "Cardinality: 'onto:hasSimpleText' -> exactly 1"
                       ] ,
                       [
                         a           sh:PropertyShape ;
                         sh:path     onto:hasSimpleText ;
                         sh:node     onto-shapes:hasSimpleText_NodeShape ;
                       ] ,
                       onto-shapes:hasSimpleText_PropShape ;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:closed            true .


####################

onto-shapes:hasSimpleText_NodeShape
  a                   sh:NodeShape ;
  sh:targetObjectsOf  onto:hasSimpleText ;
  sh:class            val-onto:SimpleText ;
  sh:message          "The object of onto:hasSimpleText must be of type SimpleText" ;
  sh:severity         sh:Violation .


onto-shapes:hasSimpleText_PropShape
  a           sh:PropertyShape ;
  sh:path     onto:hasSimpleText ;
  sh:node     val-shapes:SimpleText_Shape ;
  sh:message  "Object for: 'onto:hasSimpleText' -> must be a non-empty string." ;
  sh:severity sh:Violation .


####################

onto-shapes:listProp_NodeShape
  a                   sh:NodeShape ;
  sh:targetObjectsOf  onto:listProp ;
  sh:class            val-onto:ListValue ;
  sh:message          "The object of onto:listProp must be of type ListValue" ;
  sh:severity         sh:Violation ;
  sh:property         onto-shapes:hasListValue_listProp , onto-shapes:hasListName_listProp .


onto-shapes:hasListValue_listProp
  a           sh:PropertyShape ;
  sh:message  "the value of onto:listProp is invalid" ;
  sh:path     val-onto:hasListValue ;
  sh:in       ( "n1" "n1.1" "n1.1.1" ) ;
  sh:severity sh:Violation .


onto-shapes:hasListName_listProp
  a           sh:PropertyShape ;
  sh:message  "the list name of onto:listProp is invalid" ;
  sh:path     val-onto:hasListName ;
  sh:in       ( "onlyList" ) ;
  sh:severity sh:Violation .

####################

onto-shapes:linkProp_PropShape
  a                   sh:PropertyShape ;
  sh:path             onto:linkProp ;
  sh:node             [
                        sh:class onto:CardOneResource ;
                      ] ;
  sh:message          "object of linkProp be a a CardOneResource or a subclass of it." ;
  sh:severity         sh:Violation .